<link rel="stylesheet" href="../styles/navigation.css">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E⚙️%3C/text%3E%3C/svg%3E">
</head>
<body style="padding-top: 90px;">
<!-- Navigation will be loaded dynamically -->
<a href="../../index.html" class="back-action-heart">
← Back to Home
</a>
<div class="settings-hero">
<div class="hero-content">
<h1 class="hero-title gradient-text">
Settings & Configuration
</h1><p class="text-xl text-purple-300 font-dancing" data-aos="fade-up" data-aos-delay="200">
Customize your anniversary experience
</p></div></div><div class="settings-content-sanctuary"><div class="content-sanctuary"><div class="row justify-content-center"><div class="col-lg-10 col-xl-8"><div class="settings-precious-moment-display p-4" data-aos="fade-up"><div class="settings-story-chapter" data-aos="fade-up" data-aos-delay="100"><h3 class="text-white mb-3"><i class="fas fa-palette"></i> Theme & Appearance
Test Music Playback
</button></div><div class="col-md-6 mb-3"><div class="d-flex align-items-center mb-2"><span class="status-indicator status-online"></span><span class="text-white-75 fw-medium">Theme System</span></div><button class="test-action-heart w-100" onclick="testThemeSystem()">
Test Theme Toggle
</button></div></div><div class="row mb-3"><div class="col-md-6 mb-3"><div class="d-flex align-items-center mb-2"><span class="status-indicator status-online"></span><span class="text-white-75 fw-medium">Animation System</span></div><button class="test-action-heart w-100" onclick="testAnimationSystem()">
Test Animations
</button></div><div class="col-md-6 mb-3"><div class="d-flex align-items-center mb-2"><span class="status-indicator status-online"></span><span class="text-white-75 fw-medium">Navigation System</span></div><button class="test-action-heart w-100" onclick="testNavigationSystem()">
Test Navigation
</button></div></div><div class="row"><div class="col-md-6 mb-3"><div class="d-flex align-items-center mb-2"><span class="status-indicator status-warning"></span><span class="text-white-75 fw-medium">Performance Test</span></div><button class="test-action-heart w-100" onclick="runPerformanceTest()">
Run Performance Test
</button></div><div class="col-md-6 mb-3"><div class="d-flex align-items-center mb-2"><span class="status-indicator status-online"></span><span class="text-white-75 fw-medium">Storage System</span></div><button class="test-action-heart w-100" onclick="testStorageSystem()">
Test Local Storage
</button></div></div></div><div class="settings-story-chapter" data-aos="fade-up" data-aos-delay="500"><h3 class="text-white mb-3">🗂️ Data Management</h3><div class="row align-items-center mb-3"><div class="col-md-8"><label class="text-white-75 fw-medium">Auto-Save Settings</label><p class="text-white-50 small mb-0">Automatically save your preferences</p></div><div class="col-md-4 text-end"><label class="toggle-switch"><input type="checkbox" id="autoSaveToggle" checked><span class="slider"></span></label></div></div><div class="row mb-3"><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="exportSettings()">
📤 Export Settings
</button></div><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="importSettings()">
📥 Import Settings
</button></div></div><div class="row"><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="resetToDefaults()">
🔄 Reset to Defaults
</button></div><div class="col-md-6 mb-3"><button class="test-action-heart danger w-100" onclick="clearAllData()">
🗑️ Clear All Data
</button></div></div></div><div class="settings-story-chapter" data-aos="fade-up" data-aos-delay="600"><h3 class="text-white mb-3">🛠️ Developer Tools</h3><div class="row align-items-center mb-3"><div class="col-md-8"><label class="text-white-75 fw-medium">Debug Mode</label><p class="text-white-50 small mb-0">Enable console logging and debug information</p></div><div class="col-md-4 text-end"><label class="toggle-switch"><input type="checkbox" id="debugToggle"><span class="slider"></span></label></div></div><div class="row mb-3"><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="showSystemInfo()">
📊 System Information
</button></div><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="downloadLogs()">
📋 Download Logs
</button></div></div><div class="row"><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="runFullDiagnostic()">
🔍 Full Diagnostic
</button></div><div class="col-md-6 mb-3"><button class="test-action-heart w-100" onclick="checkForUpdates()">
🔄 Check Updates
</button></div></div></div><div class="settings-story-chapter" data-aos="fade-up" data-aos-delay="700"><h3 class="text-white mb-3">ℹ️ About</h3><div class="row"><div class="col-md-6"><p class="text-white-75 mb-1"><strong>Version:</strong> 2.0.0</p><p class="text-white-75 mb-1"><strong>Build:</strong> Production</p><p class="text-white-75 mb-1"><strong>Last Updated:</strong><span id="lastUpdated"></span></p></div><div class="col-md-6"><p class="text-white-75 mb-1"><strong>Theme:</strong> Dark Romantic</p><p class="text-white-75 mb-1"><strong>Framework:</strong> Vanilla JS + CSS</p><p class="text-white-75 mb-1"><strong>Status:</strong><span class="text-success">Production Ready</span></p></div></div></div></div></div></div></div></div><div id="notificationToast" class="notification-toast"><span id="notificationMessage"></span></div><footer class="shared-story-closing bg-gradient-love text-white text-center py-4"><p class="mb-0">Made with <i class="fas fa-heart text-danger"></i> by Soumya</p><small>&copy; 2025 Anniversary Website. All rights reserved.</small></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script><script type="module" src="../../scripts/shared.js"></script><script>
// Initialize AOS
AOS.init({
duration: 800,
easing: 'ease-in-out',
once: true
});

// Settings Manager Class
class SettingsManager {
constructor() {
this.settings = this.loadSettings();
this.init();
}

init() {
this.setupEventListeners();
this.updateUI();
this.updateLastUpdated();
this.runInitialDiagnostics();
this.initializeParticles();
}

loadSettings() {
const defaultSettings = {
darkTheme: true,
bubbleAnimations: true,
reducedMotion: false,
backgroundMusic: true,
volume: 30,
crossPageSync: true,
highPerformance: true,
preloadImages: true,
autoSave: true,
debugMode: false
};

try {
const saved = localStorage.getItem('anniversarySettings');
return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;
} catch (error) {
console.warn('Failed to load settings:', error);
return defaultSettings;
}
}

saveSettings() {
try {
localStorage.setItem('anniversarySettings', JSON.stringify(this.settings));
this.showNotification('Settings saved successfully', 'success');
} catch (error) {
console.error('Failed to save settings:', error);
this.showNotification('Failed to save settings', 'error');
}
}

setupEventListeners() {
// Toggle switches
document.getElementById('darkThemeToggle').addEventListener('change', (e) => {
this.settings.darkTheme = e.target.checked;
this.applyTheme();
this.saveSettings();
});

document.getElementById('bubblesToggle').addEventListener('change', (e) => {
this.settings.bubbleAnimations = e.target.checked;
this.toggleBubbles();
this.saveSettings();
});

document.getElementById('reducedMotionToggle').addEventListener('change', (e) => {
this.settings.reducedMotion = e.target.checked;
this.applyReducedMotion();
this.saveSettings();
});

document.getElementById('musicToggle').addEventListener('change', (e) => {
this.settings.backgroundMusic = e.target.checked;
this.toggleMusic();
this.saveSettings();
});

document.getElementById('volumeSlider').addEventListener('input', (e) => {
this.settings.volume = parseInt(e.target.value);
this.updateVolumeDisplay();
this.applyVolume();
this.saveSettings();
});

document.getElementById('crossPageSyncToggle').addEventListener('change', (e) => {
this.settings.crossPageSync = e.target.checked;
this.saveSettings();
});

document.getElementById('performanceToggle').addEventListener('change', (e) => {
this.settings.highPerformance = e.target.checked;
this.applyPerformanceMode();
this.saveSettings();
});

document.getElementById('preloadToggle').addEventListener('change', (e) => {
this.settings.preloadImages = e.target.checked;
this.saveSettings();
});

document.getElementById('autoSaveToggle').addEventListener('change', (e) => {
this.settings.autoSave = e.target.checked;
this.saveSettings();
});

document.getElementById('debugToggle').addEventListener('change', (e) => {
this.settings.debugMode = e.target.checked;
this.toggleDebugMode();
this.saveSettings();
});
}

updateUI() {
// Update toggle switches
document.getElementById('darkThemeToggle').checked = this.settings.darkTheme;
document.getElementById('bubblesToggle').checked = this.settings.bubbleAnimations;
document.getElementById('reducedMotionToggle').checked = this.settings.reducedMotion;
document.getElementById('musicToggle').checked = this.settings.backgroundMusic;
document.getElementById('volumeSlider').value = this.settings.volume;
document.getElementById('crossPageSyncToggle').checked = this.settings.crossPageSync;
document.getElementById('performanceToggle').checked = this.settings.highPerformance;
document.getElementById('preloadToggle').checked = this.settings.preloadImages;
document.getElementById('autoSaveToggle').checked = this.settings.autoSave;
document.getElementById('debugToggle').checked = this.settings.debugMode;

this.updateVolumeDisplay();
}

updateVolumeDisplay() {
document.getElementById('volumeValue').textContent = `${this.settings.volume}%`;
}

updateLastUpdated() {
const now = new Date();
document.getElementById('lastUpdated').textContent = now.toLocaleDateString();
}

applyTheme() {
const html = document.documentElement;
if (this.settings.darkTheme) {
html.setAttribute('data-theme', 'dark');
} else {
html.setAttribute('data-theme', 'light');
}
}

toggleBubbles() {
const bubbles = document.querySelector('.floating-bubbles');
if (bubbles) {
bubbles.style.display = this.settings.bubbleAnimations ? 'block' : 'none';
}
}

applyReducedMotion() {
if (this.settings.reducedMotion) {
document.body.classList.add('reduced-motion');
} else {
document.body.classList.remove('reduced-motion');
}
}

toggleMusic() {
if (window.musicManager) {
if (this.settings.backgroundMusic) {
window.musicManager.play();
} else {
window.musicManager.pause();
}
}
}

applyVolume() {
if (window.musicManager) {
window.musicManager.setVolume(this.settings.volume / 100);
}
}

applyPerformanceMode() {
if (this.settings.highPerformance) {
document.body.classList.add('high-performance');
} else {
document.body.classList.remove('high-performance');
}
}

toggleDebugMode() {
if (this.settings.debugMode) {
console.log('Debug mode enabled');
window.debugMode = true;
} else {
console.log('Debug mode disabled');
window.debugMode = false;
}
}

runInitialDiagnostics() {
// Check system status
setTimeout(() => {
this.updateSystemStatus();
}, 1000);
}

updateSystemStatus() {
// Update performance meter
const performance = this.calculatePerformance();
document.getElementById('performanceBar').style.width = `${performance}%`;

let status = 'Poor';
if (performance>= 80) status = 'Excellent';
else if (performance>= 60) status = 'Good';
else if (performance>= 40) status = 'Fair';

document.getElementById('performanceValue').textContent = `${performance}% - ${status}`;
}

calculatePerformance() {
let score = 100;

// Check if animations are running smoothly
if (!this.settings.highPerformance) score -= 15;
if (this.settings.reducedMotion) score -= 10;
if (!this.settings.preloadImages) score -= 5;

// Random variation for demo
score += Math.random() * 10 - 5;

return Math.max(0, Math.min(100, Math.round(score)));
}

showNotification(message, type = 'info') {
const toast = document.getElementById('notificationToast');
const messageEl = document.getElementById('notificationMessage');

messageEl.textContent = message;
toast.className = `notification-toast ${type}`;
toast.classList.add('show');

setTimeout(() => {
toast.classList.remove('show');
}, 3000);
}

initializeParticles() {
const particlesContainer = document.getElementById('settingsParticles');

// Create settings-themed particles
const settingsSymbols = ['<i data-lucide="settings" class="icon-settings"></i>', '<i data-lucide="wrench" class="icon-tools"></i>', '🛠️', '⚡', '🎵', '🎨', '📊'];

for (let i = 0; i < 8; i++) {
setTimeout(() => {
this.createSettingsParticle(particlesContainer, settingsSymbols);
}, i * 800);
}

// Continue creating particles
setInterval(() => {
this.createSettingsParticle(particlesContainer, settingsSymbols);
}, 2000);
}

createSettingsParticle(container, symbols) {
const particle = document.createElement('div');
particle.className = 'settings-particle';

const symbol = symbols[Math.floor(Math.random() * symbols.length)];
particle.textContent = symbol;
particle.style.fontSize = Math.random() * 20 + 15 + 'px';
particle.style.left = Math.random() * 100 + '%';
particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
particle.style.animationDelay = Math.random() * 2 + 's';

container.appendChild(particle);

// Remove particle after animation
setTimeout(() => {
if (particle.parentNode) {
particle.parentNode.removeChild(particle);
}
}, 20000);
}
}

// Test Functions
async function testMusicSystem() {
settingsManager.showNotification('Testing music system...', 'info');

try {
if (window.musicManager) {
// Test play functionality
if (typeof window.musicManager.play === 'function') {
const playResult = await window.musicManager.play();

// Pause immediately after test
if (typeof window.musicManager.pause === 'function') {
setTimeout(() => window.musicManager.pause(), 500);
}

if (playResult !== false) {
settingsManager.showNotification('Music system: ✅ Working perfectly', 'success');
} else {
settingsManager.showNotification('Music system: ⚠️ Found but play failed', 'warning');
}
} else {
settingsManager.showNotification('Music system: ⚠️ Found but no play method', 'warning');
}
} else {
settingsManager.showNotification('Music system: ❌ Not found', 'error');
}
} catch (error) {
console.error('Music test error:', error);
settingsManager.showNotification(`Music system: ❌ Error - ${error.sweet-communication}`, 'error');
}
}

function testThemeSystem() {
settingsManager.showNotification('Testing theme system...', 'info');

const currentTheme = document.documentElement.getAttribute('data-theme');

setTimeout(() => {
if (currentTheme) {
settingsManager.showNotification('Theme system: ✅ Working', 'success');
} else {
settingsManager.showNotification('Theme system: ❌ Error', 'error');
}
}, 1000);
}

function testAnimationSystem() {
settingsManager.showNotification('Testing animations...', 'info');

setTimeout(() => {
settingsManager.showNotification('Animation system: ✅ Working', 'success');
}, 1000);
}

function testNavigationSystem() {
settingsManager.showNotification('Testing navigation...', 'info');

setTimeout(() => {
settingsManager.showNotification('Navigation system: ✅ Working', 'success');
}, 1000);
}

function runPerformanceTest() {
settingsManager.showNotification('Running performance test...', 'info');

setTimeout(() => {
settingsManager.updateSystemStatus();
settingsManager.showNotification('Performance test completed', 'success');
}, 2000);
}

function testStorageSystem() {
settingsManager.showNotification('Testing storage...', 'info');

try {
localStorage.setItem('test', 'test');
localStorage.removeItem('test');
setTimeout(() => {
settingsManager.showNotification('Storage system: ✅ Working', 'success');
}, 1000);
} catch (error) {
setTimeout(() => {
settingsManager.showNotification('Storage system: ❌ Error', 'error');
}, 1000);
}
}

function exportSettings() {
const settings = settingsManager.settings;
const dataStr = JSON.stringify(settings, null, 2);
const dataBlob = new Blob([dataStr], {type: 'application/json'});

const link = document.createElement('a');
link.href = URL.createObjectURL(dataBlob);
link.download = 'anniversary-settings.json';
link.click();

settingsManager.showNotification('Settings exported successfully', 'success');
}

function importSettings() {
const input = document.createElement('input');
input.type = 'file';
input.accept = '.json';

input.onchange = (e) => {
const file = e.target.files[0];
if (file) {
const reader = new FileReader();
reader.onload = (e) => {
try {
const settings = JSON.parse(e.target.result);
settingsManager.settings = { ...settingsManager.settings, ...settings };
settingsManager.updateUI();
settingsManager.saveSettings();
settingsManager.showNotification('Settings imported successfully', 'success');
} catch (error) {
settingsManager.showNotification('Failed to import settings', 'error');
}
};
reader.readAsText(file);
}
};

input.click();
}

function resetToDefaults() {
settingsManager.settings = settingsManager.loadSettings();
settingsManager.updateUI();
settingsManager.saveSettings();
settingsManager.showNotification('Settings reset to defaults', 'success');
}

function clearAllData() {
localStorage.clear();
sessionStorage.clear();
settingsManager.showNotification('All data cleared successfully', 'success');

setTimeout(() => {
window.location.reload();
}, 1500);
}

function showSystemInfo() {
const info = {
userAgent: navigator.userAgent,
platform: navigator.platform,
language: navigator.language,
cookieEnabled: navigator.cookieEnabled,
onLine: navigator.onLine,
screen: `${screen.width}x${screen.height}`,
viewport: `${window.innerWidth}x${window.innerHeight}`,
localStorage: typeof(Storage) !== "undefined",
sessionStorage: typeof(Storage) !== "undefined"
};

console.table(info);
settingsManager.showNotification('System info logged to console', 'info');
}

function downloadLogs() {
const logs = [
`Anniversary Website Logs - ${new Date().toISOString()}`,
`Version: 2.0.0`,
`Theme: ${document.documentElement.getAttribute('data-theme')}`,
`Settings: ${JSON.stringify(settingsManager.settings, null, 2)}`,
`User Agent: ${navigator.userAgent}`,
`Platform: ${navigator.platform}`,
`Screen: ${screen.width}x${screen.height}`,
`Viewport: ${window.innerWidth}x${window.innerHeight}`
].join('\n');

const dataBlob = new Blob([logs], {type: 'text/plain'});
const link = document.createElement('a');
link.href = URL.createObjectURL(dataBlob);
link.download = 'anniversary-logs.txt';
link.click();

settingsManager.showNotification('Logs downloaded successfully', 'success');
}

function runFullDiagnostic() {
settingsManager.showNotification('Running full diagnostic...', 'info');

let tests = [
() => testMusicSystem(),
() => testThemeSystem(),
() => testAnimationSystem(),
() => testNavigationSystem(),
() => testStorageSystem(),
() => runPerformanceTest()
];

tests.forEach((test, index) => {
setTimeout(test, index * 500);
});

setTimeout(() => {
settingsManager.showNotification('Full diagnostic completed', 'success');
}, tests.length * 500 + 1000);
}

function checkForUpdates() {
settingsManager.showNotification('Checking for updates...', 'info');

setTimeout(() => {
settingsManager.showNotification('You have the latest version!', 'success');
}, 2000);
}

// Initialize Settings Manager
let settingsManager;
document.addEventListener('DOMContentLoaded', () => {
settingsManager = new SettingsManager();
});
</script><script>
// Initialize Lucide icons
document.addEventListener('DOMContentLoaded', function() {
if (typeof lucide !== 'undefined') {
lucide.createIcons();
}
});
</script>
<!-- Unified Navigation & Data Management System -->
<script type="module" src="../../utils/Navigation.js"></script>
<script type="module" src="../../data/DataManager.js"></script>
<script type="module" src="../../utils/Database.js"></script>
<script>
// Initialize unified systems when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  console.log('🚀 Unified systems loaded for settings');
});
</script>
</body></html>