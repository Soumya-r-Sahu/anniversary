<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Anniversary Love">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ec4899">
    <title>‚ù§Ô∏è For My Sweet Jerry (Puja) ‚ù§Ô∏è</title>
    <meta name="description" content="A special surprise for my love">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://unpkg.com">
    
    <!-- Preload important scripts -->
    <link rel="preload" href="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js" as="script">
    
    <!-- Fonts with optimized loading -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüíï%3C/text%3E%3C/svg%3E">
</head>
<body class="bg-gradient-to-br from-pink-50 via-red-50 to-rose-100 overflow-x-hidden gradient-animation">
    <!-- Particles Background -->
    <div id="particles-js" class="fixed inset-0 z-0"></div>
      <!-- Floating Bubbles Container for Burst Effects -->
    <div id="floating-bubbles-container" class="fixed inset-0 pointer-events-none z-50"></div>
    
    <!-- Enhanced Background Music Player -->
    <div class="enhanced-music-player">
        <button id="music-toggle" class="music-control-btn" aria-label="Toggle Background Music">
            <span id="music-icon">üéµ</span>
            <div class="music-visualizer" id="music-visualizer" style="display: none;">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </button>
    </div>

    <!-- Welcome Section -->
    <section id="welcome" class="min-h-screen flex items-center justify-center relative z-10 px-4">        <div class="text-center w-full max-w-4xl">
            <div class="floating-bubbles" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;">
                <div class="bubble" style="left: 15%; animation-delay: 0s; animation-duration: 8s;"></div>
                <div class="bubble" style="left: 35%; animation-delay: 1.5s; animation-duration: 9s;"></div>
                <div class="bubble" style="left: 55%; animation-delay: 3s; animation-duration: 7s;"></div>
                <div class="bubble" style="left: 75%; animation-delay: 4.5s; animation-duration: 8s;"></div>
                <div class="bubble" style="left: 85%; animation-delay: 2s; animation-duration: 10s;"></div>
            </div>
            
            <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-6 font-dancing leading-tight" data-aos="fade-up">
                üíï For My Sweet Jerry üíï
            </h1>
            <h2 class="text-xl sm:text-2xl md:text-3xl text-pink-700 mb-8 font-dancing leading-relaxed" data-aos="fade-up" data-aos-delay="200">
                My Dearest <span class="text-red-500 font-semibold">Pujuu (Jerry)</span> üê≠
            </h2>
            
            <div class="text-lg md:text-xl text-gray-700 mb-8 max-w-2xl mx-auto leading-relaxed glassmorphism-bg rounded-2xl p-6" data-aos="fade-up" data-aos-delay="400">
                <span id="typed-text" class="border-r-2 border-pink-500"></span>
            </div>
              <a href="countdown.html" class="enhanced-button bubble-enhanced sparkle-effect heartbeat text-lg px-8 py-4 min-h-[44px] inline-block text-decoration-none" data-aos="fade-up" data-aos-delay="600" aria-label="Open your anniversary surprise">
                üéÅ Open Your Surprise üéÅ
            </a>
            
            <p class="text-base text-pink-600 mt-6 font-dancing" data-aos="fade-up" data-aos-delay="800">
                With all my love, Your Mankada (Soumya) üíñ
            </p>
        </div>
    </section>
    
    <!-- Audio Element for Background Music -->
    <audio id="background-music" preload="auto" loop>
        <source src="music/song1.m4a" type="audio/mp4">
        <source src="music/song1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="music-manager.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js"></script>
      <script>
        // Initialize AOS (Animate On Scroll) with mobile optimizations
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // ‚ú® PAGE TRANSITION CONFIGURATION ‚ú®
        const TRANSITION_CONFIG = {
            navigationDelay: 2000,      // Delay before navigation (milliseconds)
            fadeOutDuration: 500,       // Fade out animation duration (milliseconds)
            sparkleInterval: 200,       // Interval between sparkle effects (milliseconds)
            burstIntensity: 15,         // Number of bubbles in click burst
            hoverBurstIntensity: 5      // Number of bubbles in hover burst
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: isMobile ? 600 : 1000,
                easing: 'ease-in-out',
                once: true,
                mirror: false,
                offset: isMobile ? 50 : 120,
                delay: isMobile ? 50 : 100
            });
        });

        // Initialize Particles.js with Performance Optimization
        if (typeof particlesJS !== 'undefined') {
            particlesJS('particles-js', {
                particles: {
                    number: {
                        value: isMobile ? 10 : 18, // Optimized for 60+ FPS
                        density: {
                            enable: true,
                            value_area: 1200
                        }
                    },
                    color: {
                        value: ["#ff6b9d", "#ffa8cc", "#ffb3d6"]
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.5,
                        random: false,
                        anim: {
                            enable: false,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 3,
                        random: true,
                        anim: {
                            enable: false,
                            speed: 40,
                            size_min: 0.1,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#ff6b9d",
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: isMobile ? 0.6 : 1.2, // Reduced speed for smoother performance
                        direction: "none",
                        random: false,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: !isMobile,
                            mode: "repulse"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    },
                    modes: {
                        grab: {
                            distance: 140,
                            line_linked: {
                                opacity: 1
                            }
                        },
                        bubble: {
                            distance: 400,
                            size: 40,
                            duration: 2,
                            opacity: 8,
                            speed: 3
                        },
                        repulse: {
                            distance: 200,
                            duration: 0.4
                        },
                        push: {
                            particles_nb: 4
                        },
                        remove: {
                            particles_nb: 2
                        }
                    }
                },
                retina_detect: true
            });        }
        
        // Enhanced Music Integration with Cross-Page Sync
        function setupEnhancedMusic() {
            // Wait for music manager to be available
            if (typeof window.musicManager === 'undefined') {
                setTimeout(setupEnhancedMusic, 100);
                return;
            }
            
            // Add clear previous visits functionality
            const clearVisitsBtn = document.createElement('button');
            clearVisitsBtn.innerHTML = 'üîÑ';
            clearVisitsBtn.className = 'clear-visits-btn';
            clearVisitsBtn.title = 'Clear Previous Visits';
            clearVisitsBtn.style.cssText = `
                position: fixed;
                top: 20px;
                right: 80px;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                color: #ec4899;
                font-size: 18px;
                cursor: pointer;
                z-index: 1000;
                transition: all 0.3s ease;
            `;
            
            clearVisitsBtn.addEventListener('click', () => {
                if (confirm('Clear all previous visit data? This will reset music and other saved states.')) {
                    window.musicManager.clearPreviousVisits();
                    window.location.reload();
                }
            });
            
            clearVisitsBtn.addEventListener('mouseenter', () => {
                clearVisitsBtn.style.transform = 'scale(1.1)';
                clearVisitsBtn.style.boxShadow = '0 5px 20px rgba(236, 72, 153, 0.3)';
            });
            
            clearVisitsBtn.addEventListener('mouseleave', () => {
                clearVisitsBtn.style.transform = 'scale(1)';
                clearVisitsBtn.style.boxShadow = 'none';
            });
            
            document.body.appendChild(clearVisitsBtn);
            console.log('üéµ Enhanced music integration setup complete');        }
          // Create bubble burst effect for index page
        function createBubbleBurst(x, y, intensity = 10) {
            const bubblesContainer = document.getElementById('floating-bubbles-container');
            if (!bubblesContainer) return;
            
            const burstCount = Math.random() * intensity + intensity; // Dynamic burst count
            
            for (let i = 0; i < burstCount; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'index-burst-bubble';
                
                // Index page burst properties
                const angle = (Math.PI * 2 * i) / burstCount + (Math.random() - 0.5) * 0.7;
                const velocity = Math.random() * 250 + 120; // 120-370px
                const size = Math.random() * 20 + 10; // 10-30px
                const duration = Math.random() * 2 + 1.5; // 1.5-3.5 seconds
                const opacity = Math.random() * 0.4 + 0.3; // 0.3-0.7 opacity
                
                const endX = x + Math.cos(angle) * velocity;
                const endY = y + Math.sin(angle) * velocity - 60; // Higher initial burst
                const finalY = y + velocity; // Final position
                
                bubble.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    width: ${size}px;
                    height: ${size}px;
                    border-radius: 50%;
                    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(236, 72, 153, ${opacity}), rgba(190, 24, 93, ${opacity * 0.8}));
                    border: 1px solid rgba(255, 255, 255, 0.3);
                    pointer-events: none;
                    z-index: 150;
                    animation: indexBubbleBurstAnimation ${duration}s ease-out forwards;
                    --endX: ${endX}px;
                    --endY: ${endY}px;
                    --finalY: ${finalY}px;
                    backdrop-filter: blur(2px);
                    box-shadow: 0 0 10px rgba(236, 72, 153, 0.3), inset 0 0 5px rgba(255, 255, 255, 0.2);
                `;
                
                bubblesContainer.appendChild(bubble);
                
                // Remove bubble after animation
                setTimeout(() => {
                    if (bubble.parentNode) {
                        bubble.parentNode.removeChild(bubble);
                    }
                }, duration * 1000 + 250);
            }
        }        // Setup Bubble Burst Effects and Delayed Navigation for "Open Your Surprise" Button
        function setupBubbleBurstEffects() {
            const surpriseButton = document.querySelector('a[href="countdown.html"]');
            
            if (surpriseButton) {
                // Remove default href to prevent immediate navigation
                const originalHref = surpriseButton.href;
                surpriseButton.removeAttribute('href');
                surpriseButton.style.cursor = 'pointer';
                
                surpriseButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Visual feedback - button animation
                    this.style.transform = 'scale(0.95)';
                    this.style.transition = 'all 0.3s ease';
                    
                    const rect = this.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                      // Create burst effect
                    createBubbleBurst(x, y, TRANSITION_CONFIG.burstIntensity);
                    
                    // Show loading message
                    const originalText = this.innerHTML;
                    this.innerHTML = '‚ú® Opening surprise... ‚ú®';
                    this.style.background = 'linear-gradient(45deg, #ff6b9d, #ffa8cc)';
                    
                    // Add sparkle effects during delay
                    const sparkleInterval = setInterval(() => {
                        createBubbleBurst(
                            rect.left + Math.random() * rect.width,
                            rect.top + Math.random() * rect.height,
                            3
                        );
                    }, TRANSITION_CONFIG.sparkleInterval);
                    
                    // Navigate after delay
                    setTimeout(() => {
                        clearInterval(sparkleInterval);
                        
                        // Fade out effect before navigation
                        document.body.style.transition = `opacity ${TRANSITION_CONFIG.fadeOutDuration}ms ease-out`;
                        document.body.style.opacity = '0';
                        
                        setTimeout(() => {
                            window.location.href = originalHref;
                        }, TRANSITION_CONFIG.fadeOutDuration);
                        
                    }, TRANSITION_CONFIG.navigationDelay);
                });
                  // Also trigger on hover for extra magic
                surpriseButton.addEventListener('mouseenter', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                    createBubbleBurst(x, y, TRANSITION_CONFIG.hoverBurstIntensity);
                });
            }
        }

        // Typed.js initialization
        function initTypedText() {
            if (typeof Typed !== 'undefined' && document.getElementById('typed-text')) {
                new Typed('#typed-text', {
                    strings: [
                        "From June 16, 2024 to forever...",
                        "Every moment with you is magical..",
                        "You are my greatest blessing üíï",
                        "My sweet Jerry, my everything ‚ù§Ô∏è"
                    ],
                    typeSpeed: 50,
                    backSpeed: 30,
                    backDelay: 2000,
                    loop: true,
                    showCursor: true,
                    cursorChar: '|'
                });
            }
        }
        
        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize typed text
            setTimeout(initTypedText, 1000);
              // Setup enhanced features
            setupEnhancedMusic();
            setupBubbleBurstEffects();
              console.log('üíï Enhanced anniversary index page loaded! üíï');
        });
          // Add general click event listener for bubble burst
        document.addEventListener('click', function(e) {
            // Don't create burst if clicking on buttons or interactive elements
            if (e.target.tagName === 'BUTTON' || e.target.closest('button') || 
                e.target.closest('.enhanced-music-player') || e.target.closest('a')) {
                return;
            }
            createBubbleBurst(e.clientX, e.clientY, 6);
        });
        
        // Add touch event listener for mobile
        document.addEventListener('touchend', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.closest('button') || 
                e.target.closest('.enhanced-music-player') || e.target.closest('a')) {
                return;
            }
            if (e.changedTouches && e.changedTouches[0]) {
                createBubbleBurst(e.changedTouches[0].clientX, e.changedTouches[0].clientY, 6);
            }
        });
          // Index bubble burst animation styles
        const indexBurstStyle = document.createElement('style');
        indexBurstStyle.textContent = `
            @keyframes indexBubbleBurstAnimation {
                0% {
                    transform: translate(0, 0) scale(0.3);
                    opacity: 1;
                }
                25% {
                    transform: translate(calc(var(--endX) - 50vw), calc(var(--endY) - 50vh)) scale(1.2);
                    opacity: 0.9;
                }
                75% {
                    transform: translate(calc(var(--endX) - 50vw), calc(var(--finalY) - 50vh)) scale(0.8);
                    opacity: 0.6;
                }
                100% {
                    transform: translate(calc(var(--endX) - 50vw), calc(var(--finalY) - 50vh)) scale(0.1);
                    opacity: 0;
                }
            }
            
            .index-burst-bubble {
                user-select: none;
                will-change: transform, opacity;
                filter: blur(1px);
            }
        `;
        document.head.appendChild(indexBurstStyle);
    </script>
</body>
</html>
