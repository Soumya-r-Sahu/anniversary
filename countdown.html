<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ff6b9d">
    <title>Countdown to Our Special Day ‚ù§Ô∏è</title>
    <meta name="description" content="Countdown to our anniversary - June 16th">
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
      <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Enhanced countdown styles */
        .countdown-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: 
                0 20px 60px rgba(236, 72, 153, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .countdown-number {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 4rem;
            font-weight: 700;
            text-shadow: 0 4px 20px rgba(236, 72, 153, 0.3);
        }
        
        .countdown-label {
            color: #ec4899;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.875rem;
        }
        
        .countdown-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .countdown-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(236, 72, 153, 0.3);
        }
          @media (max-width: 640px) {
            .countdown-number {
                font-size: 2.5rem;
            }
            .countdown-container {
                padding: 2rem;
            }
        }
        
        /* Enhanced floating hearts styles for randomized animation */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
            overflow: hidden;
        }
        
        .random-heart {
            position: absolute;
            font-size: 20px;
            user-select: none;
            pointer-events: none;
            will-change: transform, opacity;
            filter: drop-shadow(0 0 8px rgba(255, 107, 157, 0.6));
        }
        
        .floating-heart-simple {
            position: fixed;
            user-select: none;
            pointer-events: none;
            will-change: transform, opacity;
            filter: drop-shadow(0 0 5px rgba(255, 107, 157, 0.5));
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-red-50 to-rose-100 min-h-screen overflow-x-hidden gradient-animation">
    
    <!-- Particles Background -->
    <div id="particles-js" class="fixed inset-0 z-0"></div>
    
    <!-- CSS Floating Hearts Pattern -->
    <div class="floating-hearts" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;">
        <div class="heart" style="left: 10%; animation-delay: 0s; animation-duration: 6s;"></div>
        <div class="heart" style="left: 30%; animation-delay: 1s; animation-duration: 7s;"></div>
        <div class="heart" style="left: 50%; animation-delay: 2s; animation-duration: 8s;"></div>
        <div class="heart" style="left: 70%; animation-delay: 3s; animation-duration: 6s;"></div>
        <div class="heart" style="left: 90%; animation-delay: 4s; animation-duration: 7s;"></div>
    </div>
      <!-- Enhanced Background Music Player -->
    <div class="enhanced-music-player">
        <button id="music-toggle" class="music-control-btn" aria-label="Toggle Background Music">
            <span id="music-icon">üéµ</span>
            <div class="music-visualizer" id="music-visualizer" style="display: none;">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </button>
    </div>
   
    <!-- Main Content -->
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="text-center max-w-4xl mx-auto">
            <!-- Header -->
            <div class="mb-12" data-aos="fade-up">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-4 font-dancing">
                    Counting Down to Forever üíï
                </h1>
                <p class="text-xl md:text-2xl text-pink-700 font-dancing">
                    Our love story continues...
                </p>
            </div>
            
            <!-- Countdown Display -->
            <div class="countdown-container mb-12" data-aos="fade-up" data-aos-delay="200">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="days">0</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="hours">0</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="minutes">0</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="seconds">0</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
            </div>
              <!-- Message with Typewriter Effect -->
            <div class="glassmorphism-bg rounded-2xl p-8 mb-8" data-aos="fade-up" data-aos-delay="400">
                <h2 class="text-2xl md:text-3xl font-dancing text-pink-600 mb-4">
                    Until Our Next Special Moment
                </h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-4">
                    <span id="typed-text" class="border-r-2 border-pink-500"></span>
                </p>
            </div>
        </div>
    </div>
      <!-- Floating Hearts Container (Dynamic) -->
    <div class="floating-hearts" id="floating-hearts-container">
        <!-- Hearts will be dynamically generated with random animations -->
    </div>
    
    <!-- Audio Element for Background Music -->
    <audio id="background-music" preload="auto" loop>
        <source src="music/song1.m4a" type="audio/mp4">
        <source src="music/song1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.    </audio>    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="heart-animation.js"></script>    <script>
        // Initialize particles.js with mobile detection
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Initialize Particles.js (same configuration as index.html for consistency)
        if (typeof particlesJS !== 'undefined') {
            particlesJS('particles-js', {
                particles: {
                    number: {
                        value: isMobile ? 10 : 18, // Performance optimized
                        density: {
                            enable: true,
                            value_area: 1200
                        }
                    },
                    color: {
                        value: ["#ff6b9d", "#ffa8cc", "#ffb3d6"]
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.4, // Slightly reduced for countdown page
                        random: false,
                        anim: {
                            enable: false,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 2.5,
                        random: true,
                        anim: {
                            enable: false,
                            speed: 40,
                            size_min: 0.1,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 120,
                        color: "#ff6b9d",
                        opacity: 0.3,
                        width: 0.8
                    },
                    move: {
                        enable: true,
                        speed: isMobile ? 0.6 : 1.2, // Performance optimized speed
                        direction: "none",
                        random: false,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: !isMobile,
                            mode: "repulse"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    },
                    modes: {
                        grab: {
                            distance: 140,
                            line_linked: {
                                opacity: 1
                            }
                        },
                        bubble: {
                            distance: 400,
                            size: 40,
                            duration: 2,
                            opacity: 8,
                            speed: 3
                        },
                        repulse: {
                            distance: 200,
                            duration: 0.4
                        },
                        push: {
                            particles_nb: 3 // Reduced for performance
                        },
                        remove: {
                            particles_nb: 2
                        }
                    }
                },
                retina_detect: true
            });
        }
        
        // Enhanced Countdown Logic
        class EnhancedCountdown {
            constructor(targetDate) {
                this.targetDate = new Date(targetDate);                this.elements = {
                    days: document.getElementById('days'),
                    hours: document.getElementById('hours'),
                    minutes: document.getElementById('minutes'),
                    seconds: document.getElementById('seconds')
                };
                this.interval = null;
                this.start();
            }
            
            start() {
                this.update();
                this.interval = setInterval(() => this.update(), 1000);
            }
            
            stop() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
            }
            
            update() {
                const now = new Date().getTime();
                const distance = this.targetDate.getTime() - now;
                
                if (distance < 0) {
                    this.onComplete();
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                this.animateNumber(this.elements.days, days);
                this.animateNumber(this.elements.hours, hours);
                this.animateNumber(this.elements.minutes, minutes);
                this.animateNumber(this.elements.seconds, seconds);
            }
            
            animateNumber(element, newValue) {
                if (!element) return;
                
                const currentValue = parseInt(element.textContent) || 0;
                if (currentValue !== newValue) {
                    element.style.transform = 'scale(1.1)';
                    element.style.transition = 'transform 0.2s ease';
                    
                    setTimeout(() => {
                        element.textContent = newValue;
                        element.style.transform = 'scale(1)';
                    }, 100);
                }
            }
            
            onComplete() {
                this.stop();
                
                // Show celebration message
                document.querySelector('.countdown-container').innerHTML = `
                    <div class="text-center py-8">
                        <h2 class="text-4xl font-dancing text-pink-600 mb-4">
                            üéâ The Day Has Arrived! üéâ
                        </h2>
                        <p class="text-xl text-gray-700">
                            Happy Anniversary, my love! üíï
                        </p>
                    </div>
                `;
                
                // Trigger celebration effects
                this.celebrate();
            }
            
            celebrate() {
                // Create confetti
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        this.createConfetti();
                    }, i * 100);
                }
            }
            
            createConfetti() {
                const colors = ['#ff6b9d', '#ffa8cc', '#ffb3d6', '#ff8fab'];
                const confetti = document.createElement('div');
                
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}vw;
                    top: -10px;
                    z-index: 9999;
                    pointer-events: none;
                    animation: confetti-fall 3s linear forwards;
                `;
                
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }        // Enhanced Music Playback Manager with Resume Functionality
        class MusicPlaybackManager {
            constructor() {
                this.storageKey = 'countdownPageVisited';
                this.musicStateKey = 'musicPlaybackState';
                this.audioElement = document.getElementById('background-music');
                this.musicToggle = document.getElementById('music-toggle');
                this.playbackState = {
                    wasPlaying: false,
                    currentTime: 0,
                    volume: 0.3,
                    lastUpdated: Date.now()
                };
                
                this.init();
            }
              init() {
                // Load saved playback state
                this.loadPlaybackState();
                
                // Check if this is the first visit
                const hasVisitedBefore = localStorage.getItem(this.storageKey);
                
                if (!hasVisitedBefore && this.audioElement) {
                    console.log('üéµ First visit detected - attempting auto-play');
                    this.setupFirstVisitAutoPlay();
                    
                    // Mark as visited
                    localStorage.setItem(this.storageKey, 'true');
                } else if (hasVisitedBefore && this.audioElement) {
                    console.log('üîÑ Returning visitor - checking for resume state');
                    this.handleReturningVisitor();
                }
                
                // Set up event listeners for state tracking
                this.setupStateTracking();
            }
            
            loadPlaybackState() {
                try {
                    const savedState = localStorage.getItem(this.musicStateKey);
                    if (savedState) {
                        this.playbackState = { ...this.playbackState, ...JSON.parse(savedState) };
                        console.log('üì± Loaded playback state:', this.playbackState);
                    }
                } catch (error) {
                    console.log('‚ö†Ô∏è Failed to load playback state:', error);
                }
            }
            
            savePlaybackState() {
                try {
                    this.playbackState.lastUpdated = Date.now();
                    localStorage.setItem(this.musicStateKey, JSON.stringify(this.playbackState));
                } catch (error) {
                    console.log('‚ö†Ô∏è Failed to save playback state:', error);
                }
            }
            
            handleReturningVisitor() {
                const timeSinceLastVisit = Date.now() - this.playbackState.lastUpdated;
                const maxResumeTime = 30 * 60 * 1000; // 30 minutes
                
                if (this.playbackState.wasPlaying && timeSinceLastVisit < maxResumeTime) {
                    console.log('üéµ Resuming music from where it was paused');
                    this.showResumeNotification();
                    this.resumePlayback();
                } else if (this.playbackState.wasPlaying) {
                    console.log('üîÑ Previous session was too long ago, offering to restart');
                    this.showRestartOption();
                } else {
                    console.log('üîá Music was paused in previous session, keeping it paused');
                    this.updateMusicButton(false);
                }
            }
            
            resumePlayback() {
                if (this.audioElement) {
                    // Set saved volume and time
                    this.audioElement.volume = this.playbackState.volume;
                    this.audioElement.currentTime = this.playbackState.currentTime;
                    
                    // Attempt to resume playback
                    const playPromise = this.audioElement.play();
                    
                    if (playPromise !== undefined) {
                        playPromise
                            .then(() => {
                                console.log('‚úÖ Successfully resumed music playback');
                                this.updateMusicButton(true);
                            })
                            .catch((error) => {
                                console.log('‚ö†Ô∏è Auto-resume blocked by browser:', error.message);
                                this.showManualResumeOption();
                            });
                    }
                }
            }
            
            showResumeNotification() {
                const notification = document.createElement('div');
                notification.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border: 1px solid rgba(255, 107, 157, 0.3);
                        border-radius: 12px;
                        padding: 12px 16px;
                        box-shadow: 0 4px 20px rgba(255, 107, 157, 0.2);
                        z-index: 1000;
                        font-size: 14px;
                        color: #333;
                        animation: slideInFade 0.5s ease-out forwards, slideOutFade 0.5s ease-out 4s forwards;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    ">
                        <span style="font-size: 16px;">üéµ</span>
                        <span>Resuming music</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Remove notification after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 5000);
            }
            
            showRestartOption() {
                const notification = document.createElement('div');
                notification.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border: 1px solid rgba(255, 107, 157, 0.3);
                        border-radius: 12px;
                        padding: 12px 16px;
                        box-shadow: 0 4px 20px rgba(255, 107, 157, 0.2);
                        z-index: 1000;
                        font-size: 14px;
                        color: #333;
                        display: flex;
                        align-items: center;
                        gap: 12px;
                        max-width: 320px;
                    ">
                        <span style="font-size: 16px;">üéµ</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 4px;">Welcome back!</div>
                            <div style="font-size: 12px; opacity: 0.8;">Would you like to restart the music?</div>
                        </div>
                        <button onclick="musicManager.restartMusic(); this.parentNode.parentNode.remove();" 
                                style="
                                    background: linear-gradient(135deg, #ff6b9d, #ffa8cc);
                                    border: none;
                                    border-radius: 6px;
                                    color: white;
                                    padding: 6px 12px;
                                    font-size: 12px;
                                    cursor: pointer;
                                    font-weight: 600;
                                ">
                            Play
                        </button>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Auto-remove after 10 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 10000);
            }
            
            
            restartMusic() {
                if (this.audioElement) {
                    this.audioElement.currentTime = 0;
                    this.audioElement.volume = 0.3;
                    
                    const playPromise = this.audioElement.play();
                    if (playPromise !== undefined) {
                        playPromise
                            .then(() => {
                                console.log('‚úÖ Music restarted successfully');
                                this.updateMusicButton(true);
                                this.playbackState.wasPlaying = true;
                                this.playbackState.currentTime = 0;
                                this.savePlaybackState();
                            })
                            .catch((error) => {
                                console.log('‚ö†Ô∏è Failed to restart music:', error);
                            });
                    }
                }
            }
            
            setupStateTracking() {
                if (!this.audioElement) return;
                
                // Track play/pause events
                this.audioElement.addEventListener('play', () => {
                    this.playbackState.wasPlaying = true;
                    this.savePlaybackState();
                });
                
                this.audioElement.addEventListener('pause', () => {
                    this.playbackState.wasPlaying = false;
                    this.playbackState.currentTime = this.audioElement.currentTime;
                    this.savePlaybackState();
                });
                
                // Track time updates (save every 5 seconds to avoid too frequent writes)
                let lastSaveTime = 0;
                this.audioElement.addEventListener('timeupdate', () => {
                    const now = Date.now();
                    if (now - lastSaveTime > 5000) { // Save every 5 seconds
                        this.playbackState.currentTime = this.audioElement.currentTime;
                        this.playbackState.volume = this.audioElement.volume;
                        this.savePlaybackState();
                        lastSaveTime = now;
                    }
                });
                
                // Track volume changes
                this.audioElement.addEventListener('volumechange', () => {
                    this.playbackState.volume = this.audioElement.volume;
                    this.savePlaybackState();
                });
                
                // Save state before page unload
                window.addEventListener('beforeunload', () => {
                    if (!this.audioElement.paused) {
                        this.playbackState.wasPlaying = true;
                        this.playbackState.currentTime = this.audioElement.currentTime;
                    } else {
                        this.playbackState.wasPlaying = false;
                    }
                    this.savePlaybackState();
                });
                
                // Set up music toggle button functionality
                if (this.musicToggle) {
                    this.musicToggle.addEventListener('click', () => {
                        this.handleMusicToggle();
                    });
                }
            }
            
            handleMusicToggle() {
                console.log('üéµ Music toggle clicked!', {
                    audioElement: !!this.audioElement,
                    isPaused: this.audioElement ? this.audioElement.paused : 'no audio'
                });
                
                if (!this.audioElement) return;
                
                if (this.audioElement.paused) {
                    console.log('‚ñ∂Ô∏è Attempting to play music...');
                    // Resume from saved position if available
                    if (this.playbackState.currentTime > 0) {
                        this.audioElement.currentTime = this.playbackState.currentTime;
                    }
                    
                    this.audioElement.play()
                        .then(() => {
                            console.log('‚úÖ Music started successfully');
                            this.updateMusicButton(true);
                            this.playbackState.wasPlaying = true;
                            this.savePlaybackState();
                        })
                        .catch((error) => {
                            console.log('‚ö†Ô∏è Failed to play music:', error);
                        });
                } else {
                    console.log('‚è∏Ô∏è Pausing music...');
                    this.audioElement.pause();
                    console.log('‚úÖ Music paused successfully');
                    this.updateMusicButton(false);
                    this.playbackState.wasPlaying = false;
                    this.playbackState.currentTime = this.audioElement.currentTime;
                    this.savePlaybackState();
                }
            }
            
            updateMusicButton(isPlaying) {
                if (this.musicToggle) {
                    const icon = this.musicToggle.querySelector('#music-icon');
                    const visualizer = this.musicToggle.querySelector('#music-visualizer');
                    
                    if (isPlaying) {
                        if (icon) icon.textContent = 'üéµ';
                        this.musicToggle.classList.add('playing');
                        if (visualizer) visualizer.style.display = 'flex';
                    } else {
                        if (icon) icon.textContent = 'üîá';
                        this.musicToggle.classList.remove('playing');
                        if (visualizer) visualizer.style.display = 'none';
                    }
                }
            }
              
            setupFirstVisitAutoPlay() {
                // Set up auto-play after minimal user interaction
                const enableAutoPlay = () => {
                    if (this.audioElement && this.audioElement.paused) {
                        // Set volume for first-time auto-play
                        this.audioElement.volume = 0.3;
                        
                        // Attempt to play
                        this.audioElement.play()
                            .then(() => {
                                console.log('‚úÖ Auto-play successful on first visit!');
                                this.updateMusicButton(true);
                                
                                // Initialize playback state for first time
                                this.playbackState.wasPlaying = true;
                                this.playbackState.currentTime = 0;
                                this.savePlaybackState();
                                
                                // Show a subtle notification
                                this.showAutoPlayNotification();
                            })
                            .catch((error) => {
                                console.log('‚ö†Ô∏è Auto-play blocked by browser:', error.message);
                                // Fallback: highlight the music button for user attention
                                this.highlightMusicButton();
                            });
                    }
                };
                
                // Try auto-play on various interaction events
                const interactionEvents = ['click', 'touchstart', 'scroll', 'mousemove', 'keydown'];
                
                const handleInteraction = () => {
                    enableAutoPlay();
                    
                    // Remove event listeners after first successful attempt
                    interactionEvents.forEach(event => {
                        document.removeEventListener(event, handleInteraction);
                    });
                };
                
                // Add event listeners
                interactionEvents.forEach(event => {
                    document.addEventListener(event, handleInteraction, { once: true, passive: true });
                });
                
                // Also try immediate auto-play (might work in some browsers)
                setTimeout(() => {
                    if (this.audioElement && this.audioElement.paused) {
                        this.audioElement.play().catch(() => {
                            // Silent fail - will be handled by interaction events
                        });
                    }
                }, 1000);
            }
            
            showAutoPlayNotification() {
                // Create a subtle notification
                const notification = document.createElement('div');
                notification.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border: 1px solid rgba(255, 107, 157, 0.3);
                        border-radius: 12px;
                        padding: 12px 16px;
                        box-shadow: 0 4px 20px rgba(255, 107, 157, 0.2);
                        z-index: 1000;
                        font-size: 14px;
                        color: #333;
                        animation: slideInFade 0.5s ease-out forwards, slideOutFade 0.5s ease-out 3s forwards;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                    ">
                        <span style="font-size: 16px;">üéµ</span>
                        <span>Music started playing automatically</span>
                    </div>
                `;
                
                // Add animation styles
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes slideInFade {
                        from {
                            opacity: 0;
                            transform: translateX(100px);
                        }
                        to {
                            opacity: 1;
                            transform: translateX(0);
                        }
                    }
                    
                    @keyframes slideOutFade {
                        from {
                            opacity: 1;
                            transform: translateX(0);
                        }
                        to {
                            opacity: 0;
                            transform: translateX(100px);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                document.body.appendChild(notification);
                
                // Remove notification after 4 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 4000);
            }
              highlightMusicButton() {
                if (this.musicToggle) {
                    // Add pulsing effect to draw attention
                    this.musicToggle.style.animation = 'pulse 1.5s ease-in-out infinite';
                    
                    // Add pulse animation if not exists
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes pulse {
                            0%, 100% { transform: scale(1); }
                            50% { transform: scale(1.1); }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    // Remove pulse after 10 seconds
                    setTimeout(() => {
                        this.musicToggle.style.animation = '';
                    }, 10000);
                }
            }
        }

        // Global music manager instance
        let musicManager;        // Initialize countdown when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set target date (June 16, 2025 for next anniversary)
            const targetDate = 'June 16, 2025 00:00:00';
            new EnhancedCountdown(targetDate);
            
            // Initialize enhanced music playback manager with resume functionality
            musicManager = new MusicPlaybackManager();
            
            // Initialize AOS
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
              // Initialize Random Heart Animation
            if (typeof RandomHeartAnimation !== 'undefined') {
                const heartAnimation = new RandomHeartAnimation();
                console.log('üíï Randomized Heart Animation Started!');
                
                // Add click interaction for heart burst effect
                document.addEventListener('click', function(e) {
                    createHeartBurst(e.clientX, e.clientY);
                });
                
            } else {
                console.log('‚ö†Ô∏è RandomHeartAnimation class not found, using fallback');
                // Fallback: Create simple floating hearts if class is not available
                createSimpleFloatingHearts();
                
                // Add click interaction for fallback as well
                document.addEventListener('click', function(e) {
                    createHeartBurst(e.clientX, e.clientY);
                });
            }
              console.log('üéØ Enhanced Countdown Initialized!');
            
            // Development helper: Add to window for testing
            // To test auto-play again, run: resetFirstVisit() in browser console
            window.resetFirstVisit = function() {
                localStorage.removeItem('countdownPageVisited');
                localStorage.removeItem('musicPlaybackState');
                console.log('üîÑ First visit status and music state reset - reload page to test');
            };
            
            // Helper function to check current music state
            window.getMusicState = function() {
                const state = localStorage.getItem('musicPlaybackState');
                console.log('üéµ Current music state:', state ? JSON.parse(state) : 'No saved state');
                return state ? JSON.parse(state) : null;
            };
            
            // Helper function to test music toggle
            window.testMusicToggle = function() {
                console.log('üß™ Testing music toggle functionality...');
                if (musicManager && musicManager.audioElement) {
                    const wasPlaying = !musicManager.audioElement.paused;
                    console.log(`Current state: ${wasPlaying ? 'Playing' : 'Paused'}`);
                    
                    // Simulate a click on the music toggle button
                    musicManager.handleMusicToggle();
                    
                    setTimeout(() => {
                        const isNowPlaying = !musicManager.audioElement.paused;
                        console.log(`New state: ${isNowPlaying ? 'Playing' : 'Paused'}`);
                        console.log(`Test ${wasPlaying !== isNowPlaying ? '‚úÖ PASSED' : '‚ùå FAILED'}: Toggle worked correctly`);
                    }, 500);
                } else {
                    console.log('‚ùå Music manager or audio element not found');
                }
            };
        });
          // Fallback function for simple randomized floating hearts
        function createSimpleFloatingHearts() {
            const heartsContainer = document.getElementById('floating-hearts-container');
            if (!heartsContainer) return;
            
            const heartEmojis = ['üíï', 'üíñ', 'üíù', 'üíó', 'üíò', '‚ù§Ô∏è', 'üíû', 'üíì', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú'];
            let heartCounter = 0;
            
            function createRandomHeart() {
                const heart = document.createElement('div');
                heart.className = 'floating-heart-simple';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                
                // Random properties for more natural movement
                const size = Math.random() * 20 + 12; // 12-32px
                const startX = Math.random() * (window.innerWidth - 50);
                const duration = Math.random() * 5 + 3; // 3-8 seconds
                const delay = Math.random() * 2; // 0-2 seconds delay
                const drift = (Math.random() - 0.5) * 300; // -150 to +150px horizontal drift
                const rotation = Math.random() * 720 + 180; // 180-900 degrees
                const opacity = Math.random() * 0.4 + 0.6; // 0.6-1.0
                const wiggle = Math.random() * 50 + 25; // Zigzag amplitude
                
                heart.style.cssText = `
                    position: fixed;
                    left: ${startX}px;
                    bottom: -50px;
                    font-size: ${size}px;
                    pointer-events: none;
                    z-index: 5;
                    opacity: ${opacity};
                    animation: floatUpRandom ${duration}s ease-out ${delay}s forwards;
                    --drift: ${drift}px;
                    --rotation: ${rotation}deg;
                    --wiggle: ${wiggle}px;
                    filter: drop-shadow(0 0 8px rgba(255, 107, 157, 0.6)) hue-rotate(${Math.random() * 60 - 30}deg);
                `;
                
                heartsContainer.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, (duration + delay + 1) * 1000);
                
                heartCounter++;
            }
            
            // Create hearts at random intervals with varying frequency
            function startHeartGeneration() {
                createRandomHeart();
                const nextInterval = Math.random() * 3000 + 800; // 0.8-3.8 seconds
                setTimeout(startHeartGeneration, nextInterval);
            }
            
            // Start with a few initial hearts
            for (let i = 0; i < 3; i++) {
                setTimeout(createRandomHeart, i * 500);
            }
            
            startHeartGeneration();
            
            // Enhanced CSS animation for floating hearts with zigzag movement
            const style = document.createElement('style');
            style.textContent = `
                @keyframes floatUpRandom {
                    0% {
                        transform: translateY(0) translateX(0) rotate(0deg) scale(0.5);
                        opacity: 0;
                    }
                    5% {
                        opacity: 0.8;
                        transform: translateY(-5vh) translateX(0) rotate(10deg) scale(1);
                    }
                    25% {
                        transform: translateY(-25vh) translateX(calc(var(--wiggle) * 0.5)) rotate(90deg) scale(1.1);
                    }
                    50% {
                        transform: translateY(-50vh) translateX(calc(var(--wiggle) * -0.3)) rotate(180deg) scale(0.9);
                    }
                    75% {
                        transform: translateY(-75vh) translateX(calc(var(--wiggle) * 0.8)) rotate(270deg) scale(1.05);
                    }
                    95% {
                        opacity: 0.4;
                    }
                    100% {
                        transform: translateY(-105vh) translateX(var(--drift)) rotate(var(--rotation)) scale(0.3);
                        opacity: 0;
                    }
                }
                
                /* Add some sparkle effect on hover over countdown container */
                .countdown-container:hover ~ .floating-hearts .floating-heart-simple {
                    animation-duration: 2s !important;
                    filter: drop-shadow(0 0 15px rgba(255, 107, 157, 0.9)) hue-rotate(45deg) !important;
                }
            `;
            document.head.appendChild(style);        }
        
        // Heart burst effect for click interactions
        function createHeartBurst(x, y) {
            const heartsContainer = document.getElementById('floating-hearts-container');
            if (!heartsContainer) return;
            
            const heartEmojis = ['üíï', 'üíñ', 'üíù', 'üíó', 'üíò', '‚ù§Ô∏è', 'üíû', 'üíì', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú'];
            const burstCount = Math.random() * 8 + 5; // 5-13 hearts in burst
            
            for (let i = 0; i < burstCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'burst-heart';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                
                // Random burst properties
                const angle = (Math.PI * 2 * i) / burstCount + (Math.random() - 0.5) * 0.5;
                const velocity = Math.random() * 200 + 100; // 100-300px
                const size = Math.random() * 15 + 10; // 10-25px
                const duration = Math.random() * 1.5 + 1; // 1-2.5 seconds
                const rotation = Math.random() * 720 + 360; // 360-1080 degrees
                const gravity = Math.random() * 200 + 150; // Fall speed
                
                const endX = x + Math.cos(angle) * velocity;
                const endY = y + Math.sin(angle) * velocity - 50; // Start upward
                const finalY = y + gravity; // Fall down with gravity
                
                heart.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    font-size: ${size}px;
                    pointer-events: none;
                    z-index: 100;
                    animation: heartBurst ${duration}s ease-out forwards;
                    --endX: ${endX}px;
                    --endY: ${endY}px;
                    --finalY: ${finalY}px;
                    --rotation: ${rotation}deg;
                    filter: drop-shadow(0 0 10px rgba(255, 107, 157, 0.8)) hue-rotate(${Math.random() * 60 - 30}deg);
                `;
                
                heartsContainer.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, duration * 1000 + 100);
            }
        }
          // Add burst animation styles
        const burstStyle = document.createElement('style');
        burstStyle.textContent = `
            @keyframes heartBurst {
                0% {
                    transform: translate(0, 0) rotate(0deg) scale(0.3);
                    opacity: 1;
                }
                30% {
                    transform: translate(calc(var(--endX) - 50vw), calc(var(--endY) - 50vh)) rotate(calc(var(--rotation) * 0.3)) scale(1.2);
                    opacity: 1;
                }
                70% {
                    opacity: 0.8;
                }
                100% {
                    transform: translate(calc(var(--endX) - 50vw), calc(var(--finalY) - 50vh)) rotate(var(--rotation)) scale(0.1);
                    opacity: 0;
                }
            }
            
            .burst-heart {
                user-select: none;
                will-change: transform, opacity;
            }
        `;
        document.head.appendChild(burstStyle);
        
        // Add confetti animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confetti-fall {
                to {
                    transform: translateY(100vh) rotate(360deg);
                }
            }        `;
        document.head.appendChild(style);
    </script>
    
    <!-- Typed.js for typewriter animation -->
    <script src="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js"></script>
    <script>
        // Initialize Typed.js for countdown message
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                if (typeof Typed !== 'undefined' && document.getElementById('typed-text')) {
                    new Typed('#typed-text', {
                        strings: [
                            "I can't wait to celebrate our special day together! üíñ",
                            "Every moment with you is a blessing to cherish üåü",
                            "Counting down the days until I can hold you close again ü•∞",
                            "Every second brings us closer to celebrating another milestone in our beautiful journey together! üêíüíï",
                            "Looking forward to making more beautiful memories with you ‚ú®"
                            
                        ],
                        typeSpeed: 50,
                        backSpeed: 30,
                        backDelay: 2500,
                        loop: true,
                        showCursor: true,
                        cursorChar: '|',
                        autoInsertCss: true,
                    });
                }
            }, 1000);
        });
    </script>
</body>
</html>
