<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ff6b9d">
    <title>Countdown to Our Special Day ‚ù§Ô∏è</title>
    <meta name="description" content="Countdown to our anniversary - June 16th">
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Enhanced countdown styles */
        .countdown-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: 
                0 20px 60px rgba(236, 72, 153, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .countdown-number {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 4rem;
            font-weight: 700;
            text-shadow: 0 4px 20px rgba(236, 72, 153, 0.3);
        }
        
        .countdown-label {
            color: #ec4899;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.875rem;
        }
        
        .countdown-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .countdown-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(236, 72, 153, 0.3);
        }
        
        @media (max-width: 640px) {
            .countdown-number {
                font-size: 2.5rem;
            }
            .countdown-container {
                padding: 2rem;
            }
        }

        /* Clear Previous Visits Button */
        .clear-visits-btn {
            position: fixed;
            top: 20px;
            right: 80px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: #ec4899;
            font-size: 18px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .clear-visits-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(236, 72, 153, 0.3);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-red-50 to-rose-100 min-h-screen overflow-x-hidden gradient-animation">
    
    <!-- Particles Background -->
    <div id="particles-js" class="fixed inset-0 z-0"></div>
    
    <!-- CSS Floating Hearts Pattern -->
    <div class="floating-hearts" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;">
        <div class="heart" style="left: 10%; animation-delay: 0s; animation-duration: 6s;"></div>
        <div class="heart" style="left: 30%; animation-delay: 1s; animation-duration: 7s;"></div>
        <div class="heart" style="left: 50%; animation-delay: 2s; animation-duration: 8s;"></div>
        <div class="heart" style="left: 70%; animation-delay: 3s; animation-duration: 6s;"></div>
        <div class="heart" style="left: 90%; animation-delay: 4s; animation-duration: 7s;"></div>
    </div>
    
    <!-- Enhanced Background Music Player -->
    <div class="enhanced-music-player">
        <button id="music-toggle" class="music-control-btn" aria-label="Toggle Background Music">
            <span id="music-icon">üéµ</span>
            <div class="music-visualizer" id="music-visualizer" style="display: none;">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </button>
    </div>
   
    <!-- Main Content -->
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="text-center max-w-4xl mx-auto">
            <!-- Header -->
            <div class="mb-12" data-aos="fade-up">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-4 font-dancing">
                    Counting Down to Forever üíï
                </h1>
                <p class="text-xl md:text-2xl text-pink-700 font-dancing">
                    Our love story continues...
                </p>
            </div>
            
            <!-- Countdown Display -->
            <div class="countdown-container mb-12" data-aos="fade-up" data-aos-delay="200">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="days">0</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="hours">0</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="minutes">0</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                    <div class="countdown-item text-center">
                        <div class="countdown-number" id="seconds">0</div>
                        <div class="countdown-label">Seconds</div>
                    </div>
                </div>
            </div>
            
            <!-- Message with Typewriter Effect -->
            <div class="glassmorphism-bg rounded-2xl p-8 mb-8" data-aos="fade-up" data-aos-delay="400">
                <h2 class="text-2xl md:text-3xl font-dancing text-pink-600 mb-4">
                    Until Our Next Special Moment
                </h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-4">
                    <span id="typed-text" class="border-r-2 border-pink-500"></span>
                </p>
            </div>
        </div>
    </div>
    
    <!-- Floating Hearts Container (Dynamic) -->
    <div class="floating-hearts" id="floating-hearts-container">
        <!-- Hearts will be dynamically generated with random animations -->
    </div>
    
    <!-- Audio Element for Background Music -->
    <audio id="background-music" preload="auto" loop>
        <source src="music/song1.m4a" type="audio/mp4">
        <source src="music/song1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="music-manager.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js"></script>

    <script>
        // Enhanced Music Integration with Cross-Page Sync
        function setupEnhancedMusic() {
            if (typeof window.musicManager === 'undefined') {
                setTimeout(setupEnhancedMusic, 100);
                return;
            }
            
            // Add clear previous visits functionality
            const clearVisitsBtn = document.createElement('button');
            clearVisitsBtn.innerHTML = 'üîÑ';
            clearVisitsBtn.className = 'clear-visits-btn';
            clearVisitsBtn.title = 'Clear Previous Visits';
            clearVisitsBtn.addEventListener('click', () => {
                if (confirm('Clear all previous visit data? This will reset music and other saved states.')) {
                    window.musicManager.clearPreviousVisits();
                    window.location.reload();
                }
            });
            clearVisitsBtn.addEventListener('mouseenter', () => {
                clearVisitsBtn.style.transform = 'scale(1.1)';
                clearVisitsBtn.style.boxShadow = '0 5px 20px rgba(236, 72, 153, 0.3)';
            });
            clearVisitsBtn.addEventListener('mouseleave', () => {
                clearVisitsBtn.style.transform = 'scale(1)';
                clearVisitsBtn.style.boxShadow = 'none';
            });
            document.body.appendChild(clearVisitsBtn);
            console.log('üéµ Enhanced music integration setup complete');
        }
        
        // Initialize particles.js with mobile detection
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Initialize Particles.js (same configuration as index.html for consistency)
        if (typeof particlesJS !== 'undefined') {
            particlesJS('particles-js', {
                particles: {
                    number: {
                        value: isMobile ? 10 : 18,
                        density: {
                            enable: true,
                            value_area: 1200
                        }
                    },
                    color: {
                        value: ["#ff6b9d", "#ffa8cc", "#ffb3d6"]
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.4,
                        random: false,
                        anim: {
                            enable: false,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 2.5,
                        random: true,
                        anim: {
                            enable: false,
                            speed: 40,
                            size_min: 0.1,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 120,
                        color: "#ff6b9d",
                        opacity: 0.3,
                        width: 0.8
                    },
                    move: {
                        enable: true,
                        speed: isMobile ? 0.6 : 1.2,
                        direction: "none",
                        random: false,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: !isMobile,
                            mode: "repulse"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    },
                    modes: {
                        grab: {
                            distance: 140,
                            line_linked: {
                                opacity: 1
                            }
                        },
                        bubble: {
                            distance: 400,
                            size: 40,
                            duration: 2,
                            opacity: 8,
                            speed: 3
                        },
                        repulse: {
                            distance: 200,
                            duration: 0.4
                        },
                        push: {
                            particles_nb: 3
                        },
                        remove: {
                            particles_nb: 2
                        }
                    }
                },
                retina_detect: true
            });
        }
        
        // Enhanced Countdown Logic
        class EnhancedCountdown {
            constructor(targetDate) {
                this.targetDate = new Date(targetDate);
                this.elements = {
                    days: document.getElementById('days'),
                    hours: document.getElementById('hours'),
                    minutes: document.getElementById('minutes'),
                    seconds: document.getElementById('seconds')
                };
                this.interval = null;
                this.start();
            }
            
            start() {
                this.update();
                this.interval = setInterval(() => this.update(), 1000);
            }
            
            stop() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
            }
            
            update() {
                const now = new Date().getTime();
                const distance = this.targetDate.getTime() - now;
                
                if (distance < 0) {
                    this.onComplete();
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                this.animateNumber(this.elements.days, days);
                this.animateNumber(this.elements.hours, hours);
                this.animateNumber(this.elements.minutes, minutes);
                this.animateNumber(this.elements.seconds, seconds);
            }
            
            animateNumber(element, newValue) {
                if (!element) return;
                
                const currentValue = parseInt(element.textContent) || 0;
                if (currentValue !== newValue) {
                    element.style.transform = 'scale(1.1)';
                    element.style.transition = 'transform 0.2s ease';
                    
                    setTimeout(() => {
                        element.textContent = newValue;
                        element.style.transform = 'scale(1)';
                    }, 100);
                }
            }
            
            onComplete() {
                this.stop();
                
                // Show celebration message
                document.querySelector('.countdown-container').innerHTML = `
                    <div class="text-center py-8">
                        <h2 class="text-4xl font-dancing text-pink-600 mb-4">
                            üéâ The Day Has Arrived! üéâ
                        </h2>
                        <p class="text-xl text-gray-700">
                            Happy Anniversary, my love! üíï
                        </p>
                    </div>
                `;
                
                // Trigger celebration effects
                this.celebrate();
            }
            
            celebrate() {
                // Create confetti
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        this.createConfetti();
                    }, i * 100);
                }
            }
            
            createConfetti() {
                const colors = ['#ff6b9d', '#ffa8cc', '#ffb3d6', '#ff8fab'];
                const confetti = document.createElement('div');
                
                confetti.style.cssText = `
                    position: fixed;
                    width: 10px;
                    height: 10px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}vw;
                    top: -10px;
                    z-index: 9999;
                    pointer-events: none;
                    animation: confetti-fall 3s linear forwards;
                `;
                
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Heart burst effect for click interactions
        function createHeartBurst(x, y) {
            const heartsContainer = document.getElementById('floating-hearts-container');
            if (!heartsContainer) return;
            
            const heartEmojis = ['üíï', 'üíñ', 'üíù', 'üíó', 'üíò', '‚ù§Ô∏è', 'üíû', 'üíì'];
            const burstCount = Math.random() * 8 + 5;
            
            for (let i = 0; i < burstCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'burst-heart';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                
                const angle = (Math.PI * 2 * i) / burstCount + (Math.random() - 0.5) * 0.5;
                const velocity = Math.random() * 200 + 100;
                const size = Math.random() * 15 + 10;
                const duration = Math.random() * 1.5 + 1;
                
                heart.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    font-size: ${size}px;
                    pointer-events: none;
                    z-index: 9999;
                    animation: heartBurstOptimized ${duration}s ease-out forwards;
                    --burst-x: ${Math.cos(angle) * velocity}px;
                    --burst-y: ${Math.sin(angle) * velocity}px;
                `;
                
                heartsContainer.appendChild(heart);
                setTimeout(() => heart.remove(), duration * 1000);
            }
        }        // Initialize countdown when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set target date (June 16, 2025 for anniversary)
            const targetDate = 'June 16, 2025 00:00:00';
            new EnhancedCountdown(targetDate);
            
            // Initialize AOS
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
            
            // Setup enhanced music
            setupEnhancedMusic();
            
            // Add click interaction for heart burst effect
            document.addEventListener('click', function(e) {
                createHeartBurst(e.clientX, e.clientY);
            });
            
            // Initialize typewriter effect
            setTimeout(function() {
                if (typeof Typed !== 'undefined') {
                    new Typed('#typed-text', {
                        strings: [
                            "Every second brings us closer to our special day...",
                            "Time moves slowly when you're excited for love...",
                            "Each moment is precious when counting down to forever...",
                            "Our hearts beat in sync with the countdown..."
                        ],
                        typeSpeed: 50,
                        backSpeed: 30,
                        backDelay: 2000,
                        startDelay: 500,
                        loop: true,
                        showCursor: true,
                        cursorChar: '|',
                        autoInsertCss: true,
                    });
                }
            }, 1000);
            
            console.log('üéØ Enhanced Countdown Initialized!');
        });
    </script>
</body>
</html>
