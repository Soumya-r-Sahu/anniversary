<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Anniversary Love">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ec4899">
    <title>‚ù§Ô∏è For My Sweet Jerry (Puja) ‚ù§Ô∏è</title>
    <meta name="description" content="A special surprise for my love">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://unpkg.com">
    
    <!-- Preload important scripts -->
    <link rel="preload" href="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js" as="script">
    
    <!-- Fonts with optimized loading -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüíï%3C/text%3E%3C/svg%3E">
</head>
<body class="bg-gradient-to-br from-pink-50 via-red-50 to-rose-100 overflow-x-hidden gradient-animation">
    <!-- Particles Background -->
    <div id="particles-js" class="fixed inset-0 z-0"></div>
    
    <!-- Floating Hearts Container for Burst Effects -->
    <div id="floating-hearts-container" class="fixed inset-0 pointer-events-none z-50"></div>
    
    <!-- Enhanced Background Music Player -->
    <div class="enhanced-music-player">
        <button id="music-toggle" class="music-control-btn" aria-label="Toggle Background Music">
            <span id="music-icon">üéµ</span>
            <div class="music-visualizer" id="music-visualizer" style="display: none;">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </button>
    </div>

    <!-- Welcome Section -->
    <section id="welcome" class="min-h-screen flex items-center justify-center relative z-10 px-4">
        <div class="text-center w-full max-w-4xl">
            <div class="floating-hearts" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;">
                <div class="heart" style="left: 10%; animation-delay: 0s; animation-duration: 6s;"></div>
                <div class="heart" style="left: 30%; animation-delay: 1s; animation-duration: 7s;"></div>
                <div class="heart" style="left: 50%; animation-delay: 2s; animation-duration: 8s;"></div>
                <div class="heart" style="left: 70%; animation-delay: 3s; animation-duration: 6s;"></div>
                <div class="heart" style="left: 90%; animation-delay: 4s; animation-duration: 7s;"></div>
            </div>
            
            <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500 mb-6 font-dancing leading-tight" data-aos="fade-up">
                üíï For My Sweet Jerry üíï
            </h1>
            <h2 class="text-xl sm:text-2xl md:text-3xl text-pink-700 mb-8 font-dancing leading-relaxed" data-aos="fade-up" data-aos-delay="200">
                My Dearest <span class="text-red-500 font-semibold">Pujuu (Jerry)</span> üê≠
            </h2>
            
            <div class="text-lg md:text-xl text-gray-700 mb-8 max-w-2xl mx-auto leading-relaxed glassmorphism-bg rounded-2xl p-6" data-aos="fade-up" data-aos-delay="400">
                <span id="typed-text" class="border-r-2 border-pink-500"></span>
            </div>
            
            <a href="countdown.html" class="enhanced-button text-lg px-8 py-4 min-h-[44px] inline-block text-decoration-none" data-aos="fade-up" data-aos-delay="600" aria-label="Open your anniversary surprise">
                üéÅ Open Your Surprise üéÅ
            </a>
            
            <p class="text-base text-pink-600 mt-6 font-dancing" data-aos="fade-up" data-aos-delay="800">
                With all my love, Your Mankada (Soumya) üíñ
            </p>
        </div>
    </section>
    
    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="music-manager.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.12/lib/typed.min.js"></script>
    
    <script>
        // Initialize AOS (Animate On Scroll) with mobile optimizations
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: isMobile ? 600 : 1000,
                easing: 'ease-in-out',
                once: true,
                mirror: false,
                offset: isMobile ? 50 : 120,
                delay: isMobile ? 50 : 100
            });
        });

        // Initialize Particles.js with Performance Optimization
        if (typeof particlesJS !== 'undefined') {
            particlesJS('particles-js', {
                particles: {
                    number: {
                        value: isMobile ? 10 : 18, // Optimized for 60+ FPS
                        density: {
                            enable: true,
                            value_area: 1200
                        }
                    },
                    color: {
                        value: ["#ff6b9d", "#ffa8cc", "#ffb3d6"]
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.5,
                        random: false,
                        anim: {
                            enable: false,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 3,
                        random: true,
                        anim: {
                            enable: false,
                            speed: 40,
                            size_min: 0.1,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#ff6b9d",
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: isMobile ? 0.6 : 1.2, // Reduced speed for smoother performance
                        direction: "none",
                        random: false,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: !isMobile,
                            mode: "repulse"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    },
                    modes: {
                        grab: {
                            distance: 140,
                            line_linked: {
                                opacity: 1
                            }
                        },
                        bubble: {
                            distance: 400,
                            size: 40,
                            duration: 2,
                            opacity: 8,
                            speed: 3
                        },
                        repulse: {
                            distance: 200,
                            duration: 0.4
                        },
                        push: {
                            particles_nb: 4
                        },
                        remove: {
                            particles_nb: 2
                        }
                    }
                },
                retina_detect: true
            });
        }
        
        // Enhanced Heart Burst Effects for "Open Your Surprise" Button
        function createHeartBurst(x, y, count = 12) {
            const container = document.getElementById('floating-hearts-container');
            if (!container) return;
            
            const heartEmojis = ['üíï', 'üíñ', 'üíù', 'üíó', 'üíò', '‚ù§Ô∏è', 'üíû', 'üíì'];
            
            for (let i = 0; i < count; i++) {
                const heart = document.createElement('div');
                heart.className = 'burst-heart';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                
                // Random burst properties
                const angle = (Math.PI * 2 * i) / count + (Math.random() - 0.5) * 0.5;
                const velocity = Math.random() * 200 + 100;
                const size = Math.random() * 15 + 10;
                const duration = Math.random() * 1.5 + 1;
                const rotation = Math.random() * 720 + 360;
                const gravity = Math.random() * 200 + 150;
                
                const endX = x + Math.cos(angle) * velocity;
                const endY = y + Math.sin(angle) * velocity - 50;
                const finalY = y + gravity;
                
                heart.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    font-size: ${size}px;
                    pointer-events: none;
                    z-index: 100;
                    animation: heartBurstOptimized ${duration}s ease-out forwards;
                    --endX: ${endX}px;
                    --endY: ${endY}px;
                    --finalY: ${finalY}px;
                    --rotation: ${rotation}deg;
                    transform: translate3d(0, 0, 0);
                    will-change: transform, opacity;
                    filter: drop-shadow(0 0 8px rgba(255, 107, 157, 0.6)) hue-rotate(${Math.random() * 60 - 30}deg);
                `;
                
                container.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, duration * 1000 + 100);
            }
        }
        
        // Enhanced Music Integration with Cross-Page Sync
        function setupEnhancedMusic() {
            // Wait for music manager to be available
            if (typeof window.musicManager === 'undefined') {
                setTimeout(setupEnhancedMusic, 100);
                return;
            }
            
            // Add clear previous visits functionality
            const clearVisitsBtn = document.createElement('button');
            clearVisitsBtn.innerHTML = 'üîÑ';
            clearVisitsBtn.className = 'clear-visits-btn';
            clearVisitsBtn.title = 'Clear Previous Visits';
            clearVisitsBtn.style.cssText = `
                position: fixed;
                top: 20px;
                right: 80px;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                color: #ec4899;
                font-size: 18px;
                cursor: pointer;
                z-index: 1000;
                transition: all 0.3s ease;
            `;
            
            clearVisitsBtn.addEventListener('click', () => {
                if (confirm('Clear all previous visit data? This will reset music and other saved states.')) {
                    window.musicManager.clearPreviousVisits();
                    window.location.reload();
                }
            });
            
            clearVisitsBtn.addEventListener('mouseenter', () => {
                clearVisitsBtn.style.transform = 'scale(1.1)';
                clearVisitsBtn.style.boxShadow = '0 5px 20px rgba(236, 72, 153, 0.3)';
            });
            
            clearVisitsBtn.addEventListener('mouseleave', () => {
                clearVisitsBtn.style.transform = 'scale(1)';
                clearVisitsBtn.style.boxShadow = 'none';
            });
            
            document.body.appendChild(clearVisitsBtn);
            console.log('üéµ Enhanced music integration setup complete');
        }
        
        // Setup Heart Burst Effects for "Open Your Surprise" Button
        function setupHeartBurstEffects() {
            const surpriseButton = document.querySelector('a[href="countdown.html"]');
            
            if (surpriseButton) {
                surpriseButton.addEventListener('click', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                    createHeartBurst(x, y);
                });
                
                // Also trigger on hover for extra magic
                surpriseButton.addEventListener('mouseenter', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                    createHeartBurst(x, y, 5); // Smaller burst on hover
                });
            }
        }

        // Typed.js initialization
        function initTypedText() {
            if (typeof Typed !== 'undefined' && document.getElementById('typed-text')) {
                new Typed('#typed-text', {
                    strings: [
                        "From June 16, 2024 to forever...",
                        "Every moment with you is magical ‚ú®",
                        "You are my greatest blessing üíï",
                        "My sweet Jerry, my everything üêí‚ù§Ô∏è"
                    ],
                    typeSpeed: 50,
                    backSpeed: 30,
                    backDelay: 2000,
                    loop: true,
                    showCursor: true,
                    cursorChar: '|'
                });
            }
        }
        
        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize typed text
            setTimeout(initTypedText, 1000);
            
            // Setup enhanced features
            setupEnhancedMusic();
            setupHeartBurstEffects();
            
            console.log('üíï Enhanced anniversary index page loaded! üíï');
        });
    </script>
</body>
</html>
